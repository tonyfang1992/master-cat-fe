(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d20ef5b"],{b21f:function(t,i,e){"use strict";e.r(i);var a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"inner row"},[e("div",{staticClass:"col-1"}),t._m(0),e("div",{staticClass:"col-1"}),e("div",{staticClass:"col-1 mt-5"}),e("div",{staticClass:"col-3 mt-5"},[e("AdminMenu")],1),e("div",{staticClass:"col-7 row mt-5"},[e("form",{directives:[{name:"show",rawName:"v-show",value:!t.isLoading,expression:"!isLoading"}],staticStyle:{width:"100%"},on:{submit:function(i){return i.stopPropagation(),i.preventDefault(),t.handleSubmit(i)}}},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"name"}},[t._v("活動名稱")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.Activity.name,expression:"Activity.name"}],staticClass:"form-control",attrs:{id:"name",type:"text",name:"name",placeholder:"活動名稱",required:""},domProps:{value:t.Activity.name},on:{input:function(i){i.target.composing||t.$set(t.Activity,"name",i.target.value)}}})]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"Activity"}},[t._v("活動分類")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.Activity.Activity,expression:"Activity.Activity"}],staticClass:"form-control",attrs:{id:"Activity",name:"Activity",required:""},on:{change:function(i){var e=Array.prototype.filter.call(i.target.options,(function(t){return t.selected})).map((function(t){var i="_value"in t?t._value:t.value;return i}));t.$set(t.Activity,"Activity",i.target.multiple?e:e[0])}}},[e("option",{attrs:{value:"",selected:"",disabled:""}},[t._v("--請選擇--")]),t._l(t.Activities,(function(i){return e("option",{key:i.id,domProps:{value:i.id}},[t._v(t._s(i.name))])}))],2)]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"description"}},[t._v("活動描述")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.Activity.description,expression:"Activity.description"}],staticClass:"form-control",attrs:{id:"description",type:"text",name:"description",placeholder:"活動描述",required:""},domProps:{value:t.Activity.description},on:{input:function(i){i.target.composing||t.$set(t.Activity,"description",i.target.value)}}})]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"discount"}},[t._v("打折數")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.Activity.discount,expression:"Activity.discount"}],staticClass:"form-control",attrs:{id:"discount",type:"text",name:"discount"},domProps:{value:t.Activity.discount},on:{input:function(i){i.target.composing||t.$set(t.Activity,"discount",i.target.value)}}})]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"image"}},[t._v("Image")]),t.Activity.image?e("img",{staticClass:"d-block img-thumbnail mb-3",attrs:{src:t.Activity.image,width:"150",height:"150"}}):t._e(),e("input",{staticClass:"form-control-file",attrs:{id:"image",type:"file",name:"image",accept:"image/*"},on:{change:t.handleFileChange}})]),e("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v("送出")])])]),e("div",{staticClass:"col-1 mt-5"})])},n=[function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"col-10 mt-5"},[e("h1",[t._v("新增活動")]),e("hr")])}],r=(e("d3b7"),e("3ca3"),e("ddb0"),e("2b3d"),e("96cf"),e("1da1")),s=e("ddfd"),c=e("be6c"),o=e("2fa3"),l=[{id:1,name:"本周活動"},{id:2,name:"新品推薦"}],d={components:{AdminMenu:s["a"]},data:function(){return{Activities:[],Activity:{Activity:"",name:"",description:"",image:"",discount:null},isLoading:!0}},created:function(){this.fetchCreateActivity()},methods:{fetchCreateActivity:function(){this.Activities=l,this.isLoading=!1},handleFileChange:function(t){var i=t.target.files;if(i.length){var e=window.URL.createObjectURL(i[0]);this.product.image=e}},handleSubmit:function(t){var i=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,n,r,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,!(i.Activity.discount>99||i.Activity.discount<1)&&/^\d+$/.test(i.Activity.discount)){e.next=4;break}return o["a"].fire({icon:"warning",title:"打折數請輸入1~99的正整數"}),e.abrupt("return");case 4:return a=t.target,n=new FormData(a),e.next=8,c["a"].createActivity({formData:n});case 8:if(r=e.sent,s=r.statusText,"OK"===s){e.next=12;break}throw new Error(s);case 12:i.$router.push({name:"cats"}),e.next=18;break;case 15:e.prev=15,e.t0=e["catch"](0),o["a"].fire({icon:"error",title:"現在無法新增商品，請稍後再試"});case 18:case"end":return e.stop()}}),e,null,[[0,15]])})))()}}},u=d,v=e("2877"),m=Object(v["a"])(u,a,n,!1,null,null,null);i["default"]=m.exports}}]);
//# sourceMappingURL=chunk-2d20ef5b.87f734dc.js.map