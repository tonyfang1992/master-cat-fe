(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-18d98104"],{"0e81":function(t,r,a){"use strict";var s=a("6b3b"),e=a.n(s);e.a},"6b3b":function(t,r,a){},cf2a:function(t,r,a){"use strict";a.r(r);var s=function(){var t=this,r=t.$createElement,a=t._self._c||r;return a("div",{staticClass:"inner row"},[a("div",{staticClass:"col-2 mt-5"}),t.isLoading?a("div",{staticClass:"col-12 forComputer"},[a("dot-loader",{attrs:{color:t.color,size:t.size}})],1):a("div",{staticClass:"forComputer container col-8 mt-5 row"},[a("div",{staticClass:"col-12"},[t._v("確認訂單")]),t._l(t.orders,(function(r){return a("div",{key:"A"+r.id,staticClass:"col-12 row mt-3 border-bottom"},[a("div",{staticClass:"col-12 word"},[a("h1",[t._v("訂單號 #"+t._s(r.id))])]),t._l(r.items,(function(r){return a("div",{key:"B"+r.id,staticClass:"col-8 row mt-1 word"},[a("div",{staticClass:"col-5"},[a("h4",[t._v(t._s(r.name))]),a("h5",[t._v(t._s(r.specification))])]),a("div",{staticClass:"col-4 word"},[a("div",[t._v("數量:"+t._s(r.OrderItem.quantity))]),a("div",[t._v("單價:"+t._s(r.price))]),a("div",[t._v("小計:"+t._s(r.OrderItem.quantity*r.price))])])])})),a("div",{staticClass:"col-2 word"},[r.amount<666?a("h6",[t._v("運費:80 (滿666免運)")]):a("h4",[t._v("運費 : 免運費!")]),"一般會員"==t.currentUser.rank?a("div",[a("h3",[t._v("總計 :"+t._s(r.amount))])]):t._e(),"黃金會員"==t.currentUser.rank?a("div",[a("b-badge",{attrs:{variant:"warning"}},[t._v("黃金會員 :再享75折")]),a("h3",[t._v("總計 :"+t._s(Math.floor(.75*r.amount)))])],1):t._e(),"白銀會員"==t.currentUser.rank?a("div",[a("b-badge",{attrs:{variant:"warning"}},[t._v("白銀會員 :再享85折")]),a("h3",[t._v("總計 :"+t._s(Math.floor(.85*r.amount)))])],1):t._e()]),"完成付款"==r.payment_status?a("div",{staticClass:"col-2"},[a("font-awesome-icon",{staticClass:"pay",attrs:{icon:["far","check-circle"],size:"2x"}}),t._v("已付款 ")],1):"取消訂單"==r.payment_status?a("div",{staticClass:"col-2"},[t._v(" 已取消訂單，還是想買? "),a("router-link",{attrs:{to:{name:"payment",params:{id:r.id}}}},[a("button",{staticClass:"btn btn-primary pl-0 pt-0 mt-0 mb-1",attrs:{type:"button"}},[t._v(" 立即付款 ")])])],1):a("div",{staticClass:"col-2 column"},[a("div",[a("router-link",{attrs:{to:{name:"payment",params:{id:r.id}}}},[a("button",{staticClass:"btn btn-primary pl-0 pt-0 mt-0 mb-1",attrs:{type:"button"}},[t._v(" 立即付款 ")])])],1),a("div",{staticClass:"mt-1"},[a("button",{staticClass:"btn btn-danger pl-0 pt-0 mt-0",attrs:{type:"button"},on:{click:function(a){return t.DeleteOrder(r.id)}}},[t._v(" 取消訂單 ")])])])],2)}))],2),t.isLoading?a("div",{staticClass:"col-12 forMobile"},[a("dot-loader",{attrs:{color:t.color,size:t.size}})],1):a("div",{staticClass:"forMobile container col-12 mt-5 row"},[a("div",{staticClass:"col-12"},[t._v("確認訂單")]),t._l(t.orders,(function(r){return a("div",{key:"A"+r.id,staticClass:"col-12 row mt-3 border-bottom"},[a("div",{staticClass:"col-12 word"},[a("h1",[t._v("訂單號 #"+t._s(r.id))])]),a("div",{staticClass:"col-6"},t._l(r.items,(function(r){return a("div",{key:"B"+r.id,staticClass:"col-12 row mt-1 word"},[a("div",{staticClass:"col-8"},[a("h6",[t._v(t._s(r.name))]),a("h6",[t._v(t._s(r.specification))])]),a("div",{staticClass:"col-4 word column"},[a("div",[t._v("數量:"+t._s(r.OrderItem.quantity))]),a("div",[t._v("單價:"+t._s(r.price))]),a("div",[t._v("小計:"+t._s(r.OrderItem.quantity*r.price))])])])})),0),a("div",{staticClass:"col-3 word"},[r.amount<666?a("h6",[t._v("運費:80 (滿666免運)")]):a("h4",[t._v("運費 : 免運費!")]),"一般會員"==t.currentUser.rank?a("div",[a("h5",[t._v("總計 :"+t._s(r.amount))])]):t._e(),"黃金會員"==t.currentUser.rank?a("div",[a("b-badge",{attrs:{variant:"warning"}},[t._v("黃金會員 :再享75折")]),a("h5",[t._v("總計 :"+t._s(Math.floor(.75*r.amount)))])],1):t._e(),"白銀會員"==t.currentUser.rank?a("div",[a("b-badge",{attrs:{variant:"warning"}},[t._v("白銀會員 :再享85折")]),a("h5",[t._v("總計 :"+t._s(Math.floor(.85*r.amount)))])],1):t._e()]),"完成付款"==r.payment_status?a("div",{staticClass:"col-3"},[a("font-awesome-icon",{staticClass:"pay",attrs:{icon:["far","check-circle"],size:"2x"}}),t._v("已付款 ")],1):"取消訂單"==r.payment_status?a("div",{staticClass:"col-3"},[t._v(" 已取消訂單，還是想買? "),a("router-link",{attrs:{to:{name:"payment",params:{id:r.id}}}},[a("button",{staticClass:"btn btn-primary pl-0 pt-0 mt-0 mb-1",attrs:{type:"button"}},[t._v(" 立即付款 ")])])],1):a("div",{staticClass:"col-3 column"},[a("div",[a("router-link",{attrs:{to:{name:"payment",params:{id:r.id}}}},[a("button",{staticClass:"btn btn-primary pl-0 pt-0 mt-0 mb-1",attrs:{type:"button"}},[t._v(" 立即付款 ")])])],1),a("div",{staticClass:"mt-1"},[a("button",{staticClass:"btn btn-danger pl-0 pt-0 mt-0",attrs:{type:"button"},on:{click:function(a){return t.DeleteOrder(r.id)}}},[t._v(" 取消訂單 ")])])])])}))],2),a("div",{staticClass:"col-2 mt-5"})])},e=[],i=(a("96cf"),a("1da1")),n=a("5530"),o=a("cc17"),c=a("2f62"),d=a("2fa3"),l=a("42c5"),v={components:{DotLoader:l["a"]},data:function(){return{orders:[],color:"#F5B7B1",size:"200px",isLoading:!0}},created:function(){this.fetchOrders()},computed:Object(n["a"])({},Object(c["b"])(["currentUser","isAuthenticated"])),methods:{fetchOrders:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a,s,e;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,o["a"].orders.getOrders(t.currentUser.id);case 3:if(a=r.sent,s=a.data,e=a.statusText,"OK"===e){r.next=8;break}throw new Error(e);case 8:t.orders=s.orders,t.isLoading=!1,r.next=16;break;case 12:r.prev=12,r.t0=r["catch"](0),t.isLoading=!1,d["a"].fire({icon:"error",title:"目前無法取得訂單內容,請稍後再試"});case 16:case"end":return r.stop()}}),r,null,[[0,12]])})))()},DeleteOrder:function(t){var r=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var s,e,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,o["a"].orders.cancelOrder(t);case 3:if(s=a.sent,e=s.statusText,"OK"===e){a.next=7;break}throw new Error(e);case 7:for(i=0;i<r.orders.length;i++)r.orders[i].id==t&&(r.orders[i].payment_status="取消訂單");d["a"].fire({icon:"success",title:"成功取消訂單"}),a.next=14;break;case 11:a.prev=11,a.t0=a["catch"](0),d["a"].fire({icon:"error",title:"目前無法刪除"});case 14:case"end":return a.stop()}}),a,null,[[0,11]])})))()}}},u=v,m=(a("0e81"),a("2877")),_=Object(m["a"])(u,s,e,!1,null,"7c980fd2",null);r["default"]=_.exports}}]);
//# sourceMappingURL=chunk-18d98104.49451c96.js.map