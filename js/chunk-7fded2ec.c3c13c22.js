(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7fded2ec"],{"20e0":function(t,e,r){},"3ca3":function(t,e,r){"use strict";var s=r("6547").charAt,a=r("69f3"),i=r("7dd0"),n="String Iterator",o=a.set,c=a.getterFor(n);i(String,"String",(function(t){o(this,{type:n,string:String(t),index:0})}),(function(){var t,e=c(this),r=e.string,a=e.index;return a>=r.length?{value:void 0,done:!0}:(t=s(r,a),e.index+=t.length,{value:t,done:!1})}))},6547:function(t,e,r){var s=r("a691"),a=r("1d80"),i=function(t){return function(e,r){var i,n,o=String(a(e)),c=s(r),l=o.length;return c<0||c>=l?t?"":void 0:(i=o.charCodeAt(c),i<55296||i>56319||c+1===l||(n=o.charCodeAt(c+1))<56320||n>57343?t?o.charAt(c):i:t?o.slice(c,c+2):n-56320+(i-55296<<10)+65536)}};t.exports={codeAt:i(!1),charAt:i(!0)}},"7cb4":function(t,e,r){"use strict";r.r(e);var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"inner row"},[r("div",{staticClass:"col-2 mt-5"}),t.isLoading?r("div",{staticClass:"col-12 forComputer"},[r("dot-loader",{attrs:{color:t.color,size:t.size}})],1):r("div",{staticClass:"forComputer container col-8 mt-5 row"},[r("div",{staticClass:"input-group mb-3"},[r("div",{staticClass:"col-12"},[t._v(" 姓名: "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})]),r("div",{staticClass:"col-12"},[t._v(" 電話: "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.phone,expression:"phone"}],staticClass:"form-control",attrs:{type:"number"},domProps:{value:t.phone},on:{input:function(e){e.target.composing||(t.phone=e.target.value)}}})]),r("div",{staticClass:"col-12"},[t._v(" 地址: "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.address,expression:"address"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.address},on:{input:function(e){e.target.composing||(t.address=e.target.value)}}})])]),r("div",{staticClass:"col-12 shadow p-3 mb-5 mx-0 bg-white rounded row"},[r("div",{staticClass:"col-3"},[t._v("免運資格:滿$666元，免運費!")]),r("div",{staticClass:"col-6"}),this.nowPrice>666?r("div",{staticClass:"col-3"},[t._v(" 已達免運標準，現省80$ ")]):t._e()]),r("div",{staticClass:"col-12"},[t._v("確認訂單內容是否正確")]),0!==this.products.length?r("div",{staticClass:"col-12"},t._l(t.products,(function(e){return r("div",{key:e.id,staticClass:"col-12 row mt-3 border-bottom"},[r("div",{staticClass:"col-3"},[r("img",{attrs:{src:e.image,width:"100%",height:"150px"}})]),r("div",{staticClass:"col-5"},[r("h3",[t._v(t._s(e.name))]),r("h4",[t._v(t._s(e.specification))])]),r("div",{staticClass:"col-2"},[r("div",{staticClass:"col-12 inline"},[t._v(" 單價 : "),r("font-awesome-icon",{attrs:{icon:"dollar-sign",size:"2x"}}),t._v(" "+t._s(e.price)+" ")],1),r("div",{staticClass:"col-12"},[r("div",{staticClass:"input-group"},[t._v(" 數量 : "),r("button",{staticClass:"btn btn-link pr-0 pt-0 mt-0",attrs:{disabled:t.isProcessing,type:"button"},on:{click:function(r){return t.MinusProduct(e.id)}}},[r("font-awesome-icon",{staticStyle:{color:"black"},attrs:{icon:["far","minus-square"],size:"2x"}})],1),t._v(" "+t._s(e.CartItem.quantity)+" "),r("button",{staticClass:"btn btn-link pl-0 pt-0 mt-0",attrs:{disabled:t.isProcessing,type:"button"},on:{click:function(r){return t.PlusProduct(e.id)}}},[r("font-awesome-icon",{staticStyle:{color:"black"},attrs:{icon:["far","plus-square"],size:"2x"}})],1)])])]),r("div",{staticClass:"col-2"},[r("button",{staticClass:"btn btn-link pl-0 pt-0 mt-0",attrs:{type:"button"},on:{click:function(r){return t.DeleteItem(e.id)}}},[r("font-awesome-icon",{staticStyle:{color:"red"},attrs:{icon:["fas","times-circle"],size:"2x"}})],1)])])})),0):r("div",{staticClass:"col-12"},[t._v("購物車內還沒有商品唷!")]),r("div",{staticClass:"col-12"}),r("div",{staticClass:"col-4"}),r("div",{staticClass:"col-4 text-right"},[r("h4",[t._v("小計 :"+t._s(t.nowPrice))]),this.nowPrice<666?r("h4",[t._v("運費 :"+t._s(t.shipping))]):r("h4",[t._v("運費 :免運費!")]),r("h3",[t._v("總計 :"+t._s(t.totalPrice))])]),0!==this.products.length?r("div",{staticClass:"col-4 mt-3"},[r("b-button",{attrs:{disabled:t.isProcessing,variant:"danger"},on:{click:function(e){return t.postOrder(t.currentUser.id)}}},[t._v("提交訂單")])],1):r("div",{staticClass:"col-4 text-center"},[r("router-link",{attrs:{to:{name:"cats"}}},[r("b-button",{staticStyle:{width:"50%"},attrs:{variant:"danger"}},[t._v("來去逛逛")])],1)],1)]),t.isLoading?r("div",{staticClass:"col-12 forMobile"},[r("dot-loader",{attrs:{color:t.color,size:t.size}})],1):r("div",{staticClass:"forMobile container col-12 mt-5 row"},[r("div",{staticClass:"input-group mb-3"},[r("div",{staticClass:"col-12"},[t._v(" 姓名: "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})]),r("div",{staticClass:"col-12"},[t._v(" 電話: "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.phone,expression:"phone"}],staticClass:"form-control",attrs:{type:"number"},domProps:{value:t.phone},on:{input:function(e){e.target.composing||(t.phone=e.target.value)}}})]),r("div",{staticClass:"col-12"},[t._v(" 地址: "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.address,expression:"address"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.address},on:{input:function(e){e.target.composing||(t.address=e.target.value)}}})])]),r("div",{staticClass:"col-12 shadow p-3 mb-5 mx-0 bg-white rounded row"},[r("div",{staticClass:"col-3"},[t._v("免運資格:滿$666元，免運費!")]),r("div",{staticClass:"col-6"}),this.nowPrice>666?r("div",{staticClass:"col-3"},[t._v(" 已達免運標準，現省80$ ")]):t._e()]),r("div",{staticClass:"col-12"},[t._v("確認訂單內容是否正確")]),0!==this.products.length?r("div",{staticClass:"col-12"},t._l(t.products,(function(e){return r("div",{key:e.id,staticClass:"col-12 row mt-3 border-bottom"},[r("div",{staticClass:"col-3"},[r("img",{attrs:{src:e.image,width:"100px",height:"100px"}})]),r("div",{staticClass:"col-5"},[r("h5",[t._v(t._s(e.name))]),r("h6",[t._v(t._s(e.specification))])]),r("div",{staticClass:"col-2"},[r("div",{staticClass:"col-12 inline"},[t._v(" 單價 : "),r("font-awesome-icon",{attrs:{icon:"dollar-sign",size:"2x"}}),t._v(" "+t._s(e.price)+" ")],1),r("div",{staticClass:"col-12"},[r("div",{staticClass:"input-group"},[t._v(" 數量 : "),r("button",{staticClass:"btn btn-link pr-0 pt-0 mt-0",attrs:{disabled:t.isProcessing,type:"button"},on:{click:function(r){return t.MinusProduct(e.id)}}},[r("font-awesome-icon",{staticStyle:{color:"black"},attrs:{icon:["far","minus-square"],size:"2x"}})],1),t._v(" "+t._s(e.CartItem.quantity)+" "),r("button",{staticClass:"btn btn-link pl-0 pt-0 mt-0",attrs:{disabled:t.isProcessing,type:"button"},on:{click:function(r){return t.PlusProduct(e.id)}}},[r("font-awesome-icon",{staticStyle:{color:"black"},attrs:{icon:["far","plus-square"],size:"2x"}})],1)])])]),r("div",{staticClass:"col-2"},[r("button",{staticClass:"btn btn-link pl-0 pt-0 mt-0",attrs:{type:"button"},on:{click:function(r){return t.DeleteItem(e.id)}}},[r("font-awesome-icon",{staticStyle:{color:"red"},attrs:{icon:["fas","times-circle"],size:"2x"}})],1)])])})),0):r("div",{staticClass:"col-12"},[t._v("購物車內還沒有商品唷!")]),r("div",{staticClass:"col-12"}),r("div",{staticClass:"col-4"}),r("div",{staticClass:"col-4 text-right"},[r("h5",[t._v("小計 :"+t._s(t.nowPrice))]),this.nowPrice<666?r("h5",[t._v("運費 :"+t._s(t.shipping))]):r("h5",[t._v("運費 :免運費!")]),r("h4",[t._v("總計 :"+t._s(t.totalPrice))])]),0!==this.products.length?r("div",{staticClass:"col-4 mt-3"},[r("b-button",{attrs:{disabled:t.isProcessing,variant:"danger"},on:{click:function(e){return t.postOrder(t.currentUser.id)}}},[t._v("提交訂單")])],1):r("div",{staticClass:"col-4 text-center"},[r("router-link",{attrs:{to:{name:"cats"}}},[r("b-button",{staticStyle:{width:"50%"},attrs:{variant:"danger"}},[t._v("來去逛逛")])],1)],1)]),r("div",{staticClass:"col-2 mt-5"})])},a=[],i=(r("4de4"),r("b0c0"),r("3ca3"),r("ddb0"),r("96cf"),r("1da1")),n=r("5530"),o=r("cc17"),c=r("2f62"),l=r("2fa3"),u=r("42c5"),d={components:{DotLoader:u["a"]},data:function(){return{products:[],nowPrice:0,shipping:80,totalPrice:0,name:"",phone:"",address:"",isLoading:!0,isProcessing:!1,color:"#F5B7B1",size:"200px"}},created:function(){this.fetchCheckoutCart()},computed:Object(n["a"])({},Object(c["b"])(["currentUser","isAuthenticated"])),methods:{fetchCheckoutCart:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var r,s,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o["a"].carts.getCheckoutCart(localStorage.getItem("cartId"));case 3:if(r=e.sent,s=r.data,a=r.statusText,"OK"===a){e.next=8;break}throw new Error(a);case 8:t.products=s.cart.items,t.nowPrice=s.totalPrice,t.name=s.user.name,t.phone=s.user.phone,t.address=s.user.address,666<t.nowPrice?t.totalPrice=t.nowPrice:t.totalPrice=t.nowPrice+t.shipping,t.isLoading=!1,e.next=20;break;case 17:e.prev=17,e.t0=e["catch"](0),l["a"].fire({icon:"error",title:"目前無法取得購物車內商品,請稍後再試"});case 20:case"end":return e.stop()}}),e,null,[[0,17]])})))()},MinusProduct:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var s,a,i,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:r.prev=0,e.isProcessing=!0,s=0;case 3:if(!(s<e.products.length)){r.next=20;break}if(e.products[s].id!=t){r.next=17;break}if(!(e.products[s].CartItem.quantity>1)){r.next=17;break}return r.next=8,o["a"].carts.subCartItem(e.products[s].CartItem.id);case 8:if(a=r.sent,i=a.data,n=a.statusText,"OK"===n){r.next=13;break}throw new Error(n);case 13:console.log(i),e.products[s].CartItem.quantity-=1,e.nowPrice-=e.products[s].price,e.totalPrice=e.nowPrice+e.shipping;case 17:s++,r.next=3;break;case 20:e.isProcessing=!1,r.next=27;break;case 23:r.prev=23,r.t0=r["catch"](0),e.isProcessing=!1,l["a"].fire({icon:"error",title:"目前無法使用購物車,請稍後再試"});case 27:case"end":return r.stop()}}),r,null,[[0,23]])})))()},PlusProduct:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var s,a,i,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:r.prev=0,e.isProcessing=!0,s=0;case 3:if(!(s<e.products.length)){r.next=26;break}if(e.products[s].id!=t){r.next=23;break}if(!(e.products[s].CartItem.quantity<e.products[s].amount)){r.next=21;break}if(!(e.products[s].CartItem.quantity<9)){r.next=18;break}return r.next=9,o["a"].carts.addCartItem(e.products[s].CartItem.id);case 9:if(a=r.sent,i=a.data,n=a.statusText,"OK"===n){r.next=14;break}throw new Error(n);case 14:console.log(i),e.products[s].CartItem.quantity+=1,e.nowPrice+=e.products[s].price,e.totalPrice=e.nowPrice+e.shipping;case 18:e.isProcessing=!1,r.next=23;break;case 21:e.isProcessing=!1,l["a"].fire({icon:"warning",title:"庫存不足，不能再多買拉!"});case 23:s++,r.next=3;break;case 26:r.next=32;break;case 28:r.prev=28,r.t0=r["catch"](0),e.isProcessing=!1,l["a"].fire({icon:"error",title:"目前無法使用購物車,請稍後再試"});case 32:case"end":return r.stop()}}),r,null,[[0,28]])})))()},DeleteItem:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:r.prev=0,s=0;case 2:if(!(s<e.products.length)){r.next=8;break}if(e.products[s].id!=t){r.next=5;break}return r.delegateYield(regeneratorRuntime.mark((function t(){var r,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.products[s].CartItem.id,t.next=3,o["a"].carts.deleteCartItem(r);case 3:if(a=t.sent,i=a.statusText,"OK"===i){t.next=7;break}throw new Error(i);case 7:e.totalPrice=e.totalPrice-e.products[s].price,e.nowPrice=e.nowPrice-e.products[s].price,e.products=e.products.filter((function(t){return t.CartItem.id!==r}));case 10:case"end":return t.stop()}}),t)}))(),"t0",5);case 5:s++,r.next=2;break;case 8:r.next=13;break;case 10:r.prev=10,r.t1=r["catch"](0),l["a"].fire({icon:"error",title:"目前無法刪除該物品,請稍後再試"});case 13:case"end":return r.stop()}}),r,null,[[0,10]])})))()},postOrder:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var s,a,i,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(r.prev=0,e.isProcessing=!0,s=0,s=parseInt(e.phone),0!=e.phone.length&&0!=e.name.length&&0!=e.address.length){r.next=7;break}return l["a"].fire({icon:"error",title:"所有欄位都是必填!"}),r.abrupt("return");case 7:if(10===e.phone.length&&!isNaN(s)){r.next=10;break}return l["a"].fire({icon:"error",title:"電話欄只能輸入長度為10的數字!"}),r.abrupt("return");case 10:return r.next=12,o["a"].orders.postOrder({cartId:localStorage.getItem("cartId"),userId:t,name:e.name,phone:e.phone,address:e.address,amount:e.totalPrice});case 12:if(a=r.sent,i=a.data,n=a.statusText,"OK"===n&&"error"!=i.status){r.next=17;break}throw new Error(n);case 17:localStorage.removeItem("cartId"),l["a"].fire({icon:"success",title:"成功新增訂單!"}),e.isProcessing=!1,e.$router.push("/orders"),r.next=27;break;case 23:r.prev=23,r.t0=r["catch"](0),e.isProcessing=!1,l["a"].fire({icon:"error",title:"目前無法成立,請稍後再試"});case 27:case"end":return r.stop()}}),r,null,[[0,23]])})))()}}},p=d,v=(r("eecf"),r("2877")),m=Object(v["a"])(p,s,a,!1,null,"ed633dee",null);e["default"]=m.exports},ddb0:function(t,e,r){var s=r("da84"),a=r("fdbc"),i=r("e260"),n=r("9112"),o=r("b622"),c=o("iterator"),l=o("toStringTag"),u=i.values;for(var d in a){var p=s[d],v=p&&p.prototype;if(v){if(v[c]!==u)try{n(v,c,u)}catch(h){v[c]=u}if(v[l]||n(v,l,d),a[d])for(var m in i)if(v[m]!==i[m])try{n(v,m,i[m])}catch(h){v[m]=i[m]}}}},eecf:function(t,e,r){"use strict";var s=r("20e0"),a=r.n(s);a.a}}]);
//# sourceMappingURL=chunk-7fded2ec.c3c13c22.js.map