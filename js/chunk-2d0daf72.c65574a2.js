(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0daf72"],{"6e9f":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"inner row"},[i("div",{staticClass:"col-1"}),t._m(0),i("div",{staticClass:"col-1"}),i("div",{staticClass:"col-1 mt-5"}),i("div",{staticClass:"col-3 mt-5"},[i("AdminMenu")],1),i("div",{staticClass:"col-7 row mt-5"},[i("form",{directives:[{name:"show",rawName:"v-show",value:!t.isLoading,expression:"!isLoading"}],staticStyle:{width:"100%"},on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.handleSubmit(e)}}},[i("div",{staticClass:"form-group"},[i("label",{attrs:{for:"name"}},[t._v("活動名稱")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.ThisWeekActivity.name,expression:"ThisWeekActivity.name"}],staticClass:"form-control",attrs:{id:"name",type:"text",name:"name",placeholder:"商品名稱",required:""},domProps:{value:t.ThisWeekActivity.name},on:{input:function(e){e.target.composing||t.$set(t.ThisWeekActivity,"name",e.target.value)}}})]),i("div",{staticClass:"form-group"},[i("label",{attrs:{for:"description"}},[t._v("活動描述")]),i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.ThisWeekActivity.description,expression:"ThisWeekActivity.description"}],staticClass:"form-control",attrs:{id:"description",type:"text",name:"description",placeholder:"商品描述",required:""},domProps:{value:t.ThisWeekActivity.description},on:{input:function(e){e.target.composing||t.$set(t.ThisWeekActivity,"description",e.target.value)}}})]),i("div",{staticClass:"form-group"},[i("label",{attrs:{for:"image"}},[t._v("Image")]),t.ThisWeekActivity.image?i("img",{staticClass:"d-block img-thumbnail mb-3",attrs:{src:t.ThisWeekActivity.image,width:"150",height:"150"}}):t._e(),i("input",{staticClass:"form-control-file",attrs:{id:"image",type:"file",name:"image",accept:"image/*"},on:{change:t.handleFileChange}})]),i("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v("送出")])])]),i("div",{staticClass:"col-1 mt-5"})])},r=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"col-10 mt-5"},[i("h1",[t._v("修改本周活動")]),i("hr")])}],s=(i("d3b7"),i("3ca3"),i("ddb0"),i("2b3d"),i("96cf"),i("1da1")),n=i("ddfd"),c=i("be6c"),o=i("2fa3"),l={components:{AdminMenu:n["a"]},data:function(){return{ThisWeekActivityId:"",ThisWeekActivity:{name:"",description:"",image:""},isLoading:!0}},created:function(){var t=this.$route.params.id;this.fetchEditThisWeekActivity(t)},beforeRouteUpdate:function(t,e,i){var a=t.params.id;this.fetchEditThisWeekActivity(a),i()},methods:{fetchEditThisWeekActivity:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function i(){var a,r,s;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.prev=0,console.log(t),e.ThisWeekActivityId=t,i.next=5,c["a"].getEditThisWeekActivity(t);case 5:if(a=i.sent,r=a.data,s=a.statusText,"OK"===s){i.next=10;break}throw new Error(s);case 10:e.ThisWeekActivity=r.ThisWeekActivity,e.isLoading=!1,i.next=17;break;case 14:i.prev=14,i.t0=i["catch"](0),o["a"].fire({icon:"error",title:"無法取得商品資料，請稍後再試"});case 17:case"end":return i.stop()}}),i,null,[[0,14]])})))()},handleFileChange:function(t){var e=t.target.files;if(e.length){var i=window.URL.createObjectURL(e[0]);this.product.image=i}},handleSubmit:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function i(){var a,r,s,n,l;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.prev=0,a=e.ThisWeekActivityId,r=t.target,s=new FormData(r),i.next=6,c["a"].editThisWeekActivity({formData:s,targetThisWeekActivityId:a});case 6:if(n=i.sent,l=n.statusText,"OK"===l){i.next=10;break}throw new Error(l);case 10:o["a"].fire({icon:"success",title:"成功修改活動資訊"}),e.$router.push({name:"AdminGetActivity"}),i.next=17;break;case 14:i.prev=14,i.t0=i["catch"](0),o["a"].fire({icon:"error",title:"現在無法修改活動，請稍後再試"});case 17:case"end":return i.stop()}}),i,null,[[0,14]])})))()}}},d=l,m=i("2877"),u=Object(m["a"])(d,a,r,!1,null,null,null);e["default"]=u.exports}}]);
//# sourceMappingURL=chunk-2d0daf72.c65574a2.js.map