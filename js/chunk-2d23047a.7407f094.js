(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d23047a"],{ec39:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"inner row"},[r("div",{staticClass:"col-1"}),e._m(0),r("div",{staticClass:"col-1"}),r("div",{staticClass:"col-1 mt-5"}),r("div",{staticClass:"col-3 mt-5"},[r("AdminMenu")],1),r("div",{staticClass:"col-7 row mt-5"},[r("form",{directives:[{name:"show",rawName:"v-show",value:!e.isLoading,expression:"!isLoading"}],staticStyle:{width:"100%"},on:{submit:function(t){return t.stopPropagation(),t.preventDefault(),e.handleSubmit(t)}}},[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"name"}},[e._v("商品名稱")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.product.name,expression:"product.name"}],staticClass:"form-control",attrs:{id:"name",type:"text",name:"name",placeholder:"商品名稱",required:""},domProps:{value:e.product.name},on:{input:function(t){t.target.composing||e.$set(e.product,"name",t.target.value)}}})]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"Category"}},[e._v("大分類")]),r("select",{directives:[{name:"model",rawName:"v-model",value:e.product.CategoryId,expression:"product.CategoryId"}],staticClass:"form-control",attrs:{id:"Category",name:"Category",required:""},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.product,"CategoryId",t.target.multiple?r:r[0])}}},[r("option",{attrs:{value:"",selected:"",disabled:""}},[e._v("--請選擇--")]),e._l(e.Categories,(function(t){return r("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.name))])}))],2)]),2==e.product.CategoryId?r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"Can"}},[e._v("罐頭品牌")]),r("select",{directives:[{name:"model",rawName:"v-model",value:e.product.CanId,expression:"product.CanId"}],staticClass:"form-control",attrs:{id:"Can",name:"Can",required:""},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.product,"CanId",t.target.multiple?r:r[0])}}},[r("option",{attrs:{value:"",selected:"",disabled:""}},[e._v("--請選擇--")]),e._l(e.Cans,(function(t){return r("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.brand))])}))],2)]):e._e(),2==e.product.CategoryId?r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"CanType"}},[e._v("罐頭分類")]),r("select",{directives:[{name:"model",rawName:"v-model",value:e.product.CanTypeId,expression:"product.CanTypeId"}],staticClass:"form-control",attrs:{id:"CanType",name:"CanType",required:""},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.product,"CanTypeId",t.target.multiple?r:r[0])}}},[r("option",{attrs:{value:"",selected:"",disabled:""}},[e._v("--請選擇--")]),e._l(e.CanTypes,(function(t){return r("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.type))])}))],2)]):e._e(),1==e.product.CategoryId?r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"Feed"}},[e._v("飼料品牌")]),r("select",{directives:[{name:"model",rawName:"v-model",value:e.product.FeedId,expression:"product.FeedId"}],staticClass:"form-control",attrs:{id:"Feed",name:"Feed",required:""},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.product,"FeedId",t.target.multiple?r:r[0])}}},[r("option",{attrs:{value:"",selected:"",disabled:""}},[e._v("--請選擇--")]),e._l(e.Feeds,(function(t){return r("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.brand))])}))],2)]):e._e(),1==e.product.CategoryId?r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"FeedAge"}},[e._v("飼料(依年齡)")]),r("select",{directives:[{name:"model",rawName:"v-model",value:e.product.FeedAgeId,expression:"product.FeedAgeId"}],staticClass:"form-control",attrs:{id:"FeedAge",name:"FeedAge",required:""},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.product,"FeedAgeId",t.target.multiple?r:r[0])}}},[r("option",{attrs:{value:"",selected:"",disabled:""}},[e._v("--請選擇--")]),e._l(e.FeedAges,(function(t){return r("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.age))])}))],2)]):e._e(),1==e.product.CategoryId?r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"FeedFunction"}},[e._v("飼料(依功能性)")]),r("select",{directives:[{name:"model",rawName:"v-model",value:e.product.FeedFunctionId,expression:"product.FeedFunctionId"}],staticClass:"form-control",attrs:{id:"FeedFunction",name:"FeedFunction",required:""},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.product,"FeedFunctionId",t.target.multiple?r:r[0])}}},[r("option",{attrs:{value:"",selected:"",disabled:""}},[e._v("--請選擇--")]),e._l(e.FeedFunctions,(function(t){return r("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.function))])}))],2)]):e._e(),1!==e.product.CategoryId&&2!==e.product.CategoryId?r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"SubCategory"}},[e._v("細項分類")]),r("select",{directives:[{name:"model",rawName:"v-model",value:e.product.SubcategoryId,expression:"product.SubcategoryId"}],staticClass:"form-control",attrs:{id:"SubCategory",name:"SubCategory",required:""},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.product,"SubcategoryId",t.target.multiple?r:r[0])}}},[r("option",{attrs:{value:"",selected:"",disabled:""}},[e._v("--請選擇--")]),e._l(e.SubCategories,(function(t){return r("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.name))])}))],2)]):e._e(),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"ThisWeekActivity"}},[e._v("本周活動")]),r("select",{directives:[{name:"model",rawName:"v-model",value:e.product.ThisWeekActivityId,expression:"product.ThisWeekActivityId"}],staticClass:"form-control",attrs:{id:"ThisWeekActivity",name:"ThisWeekActivity"},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.product,"ThisWeekActivityId",t.target.multiple?r:r[0])}}},[r("option",{attrs:{value:"",selected:"",disabled:""}},[e._v("--請選擇--")]),e._l(e.ThisWeekActivities,(function(t){return r("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.name))])}))],2)]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"NewActivity"}},[e._v("新品推薦")]),r("select",{directives:[{name:"model",rawName:"v-model",value:e.product.NewActivityId,expression:"product.NewActivityId"}],staticClass:"form-control",attrs:{id:"NewActivity",name:"NewActivity"},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.product,"NewActivityId",t.target.multiple?r:r[0])}}},[r("option",{attrs:{value:"",selected:"",disabled:""}},[e._v("--請選擇--")]),e._l(e.NewActivities,(function(t){return r("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.name))])}))],2)]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"description"}},[e._v("商品描述")]),r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.product.description,expression:"product.description"}],staticClass:"form-control",attrs:{id:"description",type:"text",name:"description",placeholder:"商品描述",required:""},domProps:{value:e.product.description},on:{input:function(t){t.target.composing||e.$set(e.product,"description",t.target.value)}}})]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"specification"}},[e._v("產品規格")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.product.specification,expression:"product.specification"}],staticClass:"form-control",attrs:{id:"specification",type:"text",placeholder:"產品規格",name:"specification",required:""},domProps:{value:e.product.specification},on:{input:function(t){t.target.composing||e.$set(e.product,"specification",t.target.value)}}})]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"detail"}},[e._v("產品細節")]),r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.product.detail,expression:"product.detail"}],staticClass:"form-control",attrs:{id:"detail",type:"text",placeholder:"產品細節",name:"detail",required:""},domProps:{value:e.product.detail},on:{input:function(t){t.target.composing||e.$set(e.product,"detail",t.target.value)}}})]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"price"}},[e._v("定價")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.product.price,expression:"product.price"}],staticClass:"form-control",attrs:{id:"price",type:"text",name:"price",required:""},domProps:{value:e.product.price},on:{input:function(t){t.target.composing||e.$set(e.product,"price",t.target.value)}}})]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"amount"}},[e._v("庫存")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.product.amount,expression:"product.amount"}],staticClass:"form-control",attrs:{id:"amount",type:"text",name:"amount",required:""},domProps:{value:e.product.amount},on:{input:function(t){t.target.composing||e.$set(e.product,"amount",t.target.value)}}})]),r("div",[r("b-form-radio-group",{attrs:{id:"launched",options:e.launched,name:"launched"},model:{value:e.product.launched,callback:function(t){e.$set(e.product,"launched",t)},expression:"product.launched"}})],1),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"image"}},[e._v("Image")]),e.product.image?r("img",{staticClass:"d-block img-thumbnail mb-3",attrs:{src:e.product.image,width:"150",height:"150"}}):e._e(),r("input",{staticClass:"form-control-file",attrs:{id:"image",type:"file",name:"image",accept:"image/*"},on:{change:e.handleFileChange}})]),r("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[e._v("送出")])])]),r("div",{staticClass:"col-1 mt-5"})])},o=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"col-10 mt-5"},[r("h1",[e._v("修改商品")]),r("hr")])}],i=(r("d3b7"),r("3ca3"),r("ddb0"),r("2b3d"),r("96cf"),r("1da1")),n=r("ddfd"),s=r("be6c"),c=r("2fa3"),d={components:{AdminMenu:n["a"]},data:function(){return{ProductId:"",Categories:[],SubCategories:[],ThisWeekActivities:[],NewActivities:[],Cans:[],CanTypes:[],Feeds:[],FeedAges:[],FeedFunctions:[],launched:[{text:"上架",value:!0},{text:"待上架",value:!1}],product:{name:"",description:"",image:"",amount:null,specification:"",price:null,detail:"",CanId:"",CanTypeId:"",FeedId:"",FeedAgeId:"",FeedFunctionId:"",CategoryId:"",SubcategoryId:"",NewActivityId:"",ThisWeekActivityId:""},isLoading:!0}},created:function(){var e=this.$route.params.id;this.fetchEditProduct(e)},beforeRouteUpdate:function(e,t,r){var a=e.params.id;this.fetchEditProduct(a),r()},methods:{fetchEditProduct:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a,o,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,t.ProductId=e,r.next=4,s["a"].getEditProduct(e);case 4:if(a=r.sent,o=a.data,i=a.statusText,"OK"===i){r.next=9;break}throw new Error(i);case 9:t.product=o.product,t.Categories=o.Categories,t.SubCategories=o.SubCategories,t.ThisWeekActivities=o.ThisWeekActivities,t.NewActivities=o.NewActivities,t.Cans=o.Cans,t.CanTypes=o.CanTypes,t.Feeds=o.Feeds,t.FeedAges=o.FeedAges,t.FeedFunctions=o.FeedFunctions,t.isLoading=!1,r.next=25;break;case 22:r.prev=22,r.t0=r["catch"](0),c["a"].fire({icon:"error",title:"無法取得商品資料，請稍後再試"});case 25:case"end":return r.stop()}}),r,null,[[0,22]])})))()},handleFileChange:function(e){var t=e.target.files;if(t.length){var r=window.URL.createObjectURL(t[0]);this.product.image=r}},handleSubmit:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a,o,i,n,d;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,a=t.ProductId,o=e.target,i=new FormData(o),r.next=6,s["a"].editProduct({formData:i,targetProductId:a});case 6:if(n=r.sent,d=n.statusText,"OK"===d){r.next=10;break}throw new Error(d);case 10:c["a"].fire({icon:"success",title:"成功修改商品資訊"}),t.$router.push({name:"AdminGetStore"}),r.next=17;break;case 14:r.prev=14,r.t0=r["catch"](0),c["a"].fire({icon:"error",title:"現在無法修改商品，請稍後再試"});case 17:case"end":return r.stop()}}),r,null,[[0,14]])})))()}}},u=d,l=r("2877"),p=Object(l["a"])(u,a,o,!1,null,null,null);t["default"]=p.exports}}]);
//# sourceMappingURL=chunk-2d23047a.7407f094.js.map